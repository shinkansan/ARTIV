# CAN 통신이란 무엇인가? part2
여호영 / 2020.02.25

## CAN
CAN 통신은 Controller Area Network의 줄임말로 차량 내에서 호스트 컴퓨터 없이 micro controller나 장치들이 서로 통신하기 위해 설계된 표준 통신 규격이다. CAN 통신은 각 제어기들 간의 통신을 위해 주로 사용되는 non-host bus 방식의 메세지 기반 Network protocol이다.
CAN 통신의 일반적인 특징을 알아보자.

#### CAN 통신의 특징
- 여러 개의 ECU를 병렬로 연결해 데이터를 주고받는 통신 방법.
- Micro Controller 간의 통신을 위해 설계된 Serial Network 통신 방식으로 여러 개의 CAN 장치가 서로 통신할 수 있는 경제적이며 안정적인 네트워크.
- 하나의 CAN 인터페이스로 여러 개의 ECU를 제어함으로써 자동차의 전체 Cost와 중량을 줄일 수 있고 시스템 제어 속도와 안정성을 향상시킬 수 있음.
- 장치마다 CAN controller 칩이 있음 --> 효율적으로 각 시스템 제어 가능.
- Multi Master 통신 : 모두가 Master이므로 원할 때 사용 가능.
- 전선의 길이가 짧음.
- Plug&Play : 간편하게 CAN Controller를 버스에 연결하고 끊을 수 있음.
- 한 곳으로 여러 명령이 들어오면 우선 순위에 따라 작동함.
- 주소가 아닌 ID에 의해 메시지의 내용과 우선 순위가 결정됨.
- ECU 분산제어 적용 가능.
- 설정된 ID만 골라 수신 가능.
- 다른 통신에 비해 장거리 통신 가능. (약 1km)
- 모든 노드는 공통 Baud rate를 사용. (이 내용은 아래에서 자세히 다뤄보자.)

위의 CAN 통신은 1983년 최초로 Bosch사에 의해 개발되었고, 1991년에 CAN 2.0 스펙을 발표했다.
그렇다면 CAN 2.0은 어떤 특징이 있을까?

#### CAN 2.0의 특징
- 적용 분야 : 제어시스템(파워트레인), 고장진단
- 전달 매체 : 2선식(Twist pair cable)
- Access 방식 : 이벤트 방식(멀티 마스터)
- ID 길이 : 11bit(CAN 2.0 A), 29bit(CAN 2.0 B)
- 데이터 길이 : 0~8byte
- 최대 전송 속도 : CAN A(고속, 500k~1Mbps), CAN B(저속, 125kbps 내외)
- 최대 Bus 길이 : 특정한 길이로 정해지진 않았지만 평균적으로 40m
- 최대 노드 수 : 이 또한 정해지진 않았지만 평균 3개

CAN 2.0은 다음과 같은 특징을 가지고 있다. 이전 CAN을 이용해본 적이 없어서 CAN 2.0의 장점이 무엇인지는 솔직히 잘 모르겠다..?
이번엔 위에서 CAN을 설명할 때 Baud rate라는 것을 언급했는데 그것이 무엇인지 알아보자.

#### Baud rate
한글로는 간단히 보레이트라고도 한다. Baud rate는 Micro Controller에서 데이터 통신 속도를 나타내는 단위로써 1초간에 전송할 수 있는 정보의 bit수로 표시한다. 다르게 말해서 1초에 얼마나 변조할 수 있는가를 나타내는 단위이다.
- Ex) 1600 baud rate : 8bit 단위로 데이터를 전송한다면 200개의 1byte 묶음으로 1초만에 전송. (8bit = 1byte)
- Ex) 1회 변조로 8byte 전송 : 1,000 baud rate = 8,000bps

